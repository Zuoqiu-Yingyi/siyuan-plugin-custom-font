"use strict";var Lt=Object.defineProperty;var At=(t,e,n)=>e in t?Lt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ee=(t,e,n)=>(At(t,typeof e!="symbol"?e+"":e,n),n);const J=require("siyuan");Ot();It();const Ye=Tt();function Ot(){switch(J.getFrontend()){case"desktop":case"desktop-window":case"browser-desktop":return!0;case"mobile":case"browser-mobile":return!1;default:return!1}}function Tt(){switch(J.getFrontend()){case"mobile":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"browser-desktop":return!1;default:return!1}}function It(){switch(J.getFrontend()){case"browser-desktop":case"browser-mobile":return!0;case"desktop":case"desktop-window":case"mobile":return!1;default:return!1}}class Ft{constructor(e,n=!0){this.label=e,this.collapsed=n}stdout(e,...n){const s=`[\x1B[4m${this.label}\x1B[0m] - <\x1B[1m${e.name.toUpperCase()}\x1B[0m>`;this.collapsed?globalThis.console.groupCollapsed(s):globalThis.console.group(s),e(...n),globalThis.console.trace(),globalThis.console.groupEnd()}dir(...e){this.stdout(globalThis.console.dir,...e)}table(...e){this.stdout(globalThis.console.table,...e)}debug(...e){this.stdout(globalThis.console.debug,...e)}info(...e){this.stdout(globalThis.console.info,...e)}log(...e){this.stdout(globalThis.console.log,...e)}warn(...e){this.stdout(globalThis.console.warn,...e)}error(...e){this.stdout(globalThis.console.error,...e)}}function Ct(t){t.parentNode&&t.parentNode.removeChild(t)}function Dt(t){const e=document.getElementById(t);return e?(Ct(e),!0):!1}function St(t){t&&document.head.appendChild(t)}function Vt(t){St(document.getElementById(t))}function zt(t,e){t.textContent=e}function Bt(t,e){let n=document.getElementById(t);return n||(n=document.createElement("style"),n.id=t,St(n)),zt(n,e),n}function Gt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ut=function(e){return Ht(e)&&!Pt(e)};function Ht(t){return!!t&&typeof t=="object"}function Pt(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||Rt(t)}var Yt=typeof Symbol=="function"&&Symbol.for,qt=Yt?Symbol.for("react.element"):60103;function Rt(t){return t.$$typeof===qt}function Kt(t){return Array.isArray(t)?[]:{}}function ge(t,e){return e.clone!==!1&&e.isMergeableObject(t)?ue(Kt(t),t,e):t}function Wt(t,e,n){return t.concat(e).map(function(s){return ge(s,n)})}function Xt(t,e){if(!e.customMerge)return ue;var n=e.customMerge(t);return typeof n=="function"?n:ue}function Zt(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function qe(t){return Object.keys(t).concat(Zt(t))}function yt(t,e){try{return e in t}catch{return!1}}function Jt(t,e){return yt(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function Qt(t,e,n){var s={};return n.isMergeableObject(t)&&qe(t).forEach(function(i){s[i]=ge(t[i],n)}),qe(e).forEach(function(i){Jt(t,i)||(yt(t,i)&&n.isMergeableObject(e[i])?s[i]=Xt(i,n)(t[i],e[i],n):s[i]=ge(e[i],n))}),s}function ue(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||Wt,n.isMergeableObject=n.isMergeableObject||Ut,n.cloneUnlessOtherwiseSpecified=ge;var s=Array.isArray(e),i=Array.isArray(t),l=s===i;return l?s?n.arrayMerge(t,e,n):Qt(t,e,n):ge(e,n)}ue.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(s,i){return ue(s,i,n)},{})};var xt=ue,en=xt;const tn=Gt(en);function Re(...t){return tn.all(t,{arrayMerge:(e,n,s)=>n})}function nn(t){const e={families:[],map:new Map};return t.forEach(n=>{const s=e.map.get(n.family);s?s.push(n):(e.families.push(n.family),e.map.set(n.family,[n]))}),e}function H(){}function Et(t,e){for(const n in e)t[n]=e[n];return t}function vt(t){return t()}function Ke(){return Object.create(null)}function q(t){t.forEach(vt)}function jt(t){return typeof t=="function"}function W(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let be;function We(t,e){return be||(be=document.createElement("a")),be.href=e,t===be.href}function sn(t){return Object.keys(t).length===0}function te(t,e,n,s){if(t){const i=Nt(t,e,n,s);return t[0](i)}}function Nt(t,e,n,s){return t[1]&&s?Et(n.ctx.slice(),t[1](s(e))):n.ctx}function ne(t,e,n,s){if(t[2]&&s){const i=t[2](s(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const l=[],f=Math.max(e.dirty.length,i.length);for(let o=0;o<f;o+=1)l[o]=e.dirty[o]|i[o];return l}return e.dirty|i}return e.dirty}function se(t,e,n,s,i,l){if(i){const f=Nt(e,n,s,l);t.p(f,i)}}function ie(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let s=0;s<n;s++)e[s]=-1;return e}return-1}function ln(t){const e={};for(const n in t)e[n]=!0;return e}function O(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode&&t.parentNode.removeChild(t)}function A(t){return document.createElement(t)}function me(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function x(t){return document.createTextNode(t)}function I(){return x(" ")}function oe(){return x("")}function U(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function d(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function we(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function Le(t){return t===""?null:+t}function on(t){return Array.from(t.childNodes)}function pe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Q(t,e){t.value=e??""}function he(t,e,n,s){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,s?"important":"")}function Xe(t,e,n){for(let s=0;s<t.options.length;s+=1){const i=t.options[s];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function fn(t){const e=t.querySelector(":checked");return e&&e.__value}function S(t,e,n){t.classList[n?"add":"remove"](e)}function an(t,e,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,s,e),i}class Ee{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,s=null){this.e||(this.is_svg?this.e=me(n.nodeName):this.e=A(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(s)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)E(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(y)}}let de;function _e(t){de=t}function rn(){if(!de)throw new Error("Function called outside component initialization");return de}function Te(){const t=rn();return(e,n,{cancelable:s=!1}={})=>{const i=t.$$.callbacks[e];if(i){const l=an(e,n,{cancelable:s});return i.slice().forEach(f=>{f.call(t,l)}),!l.defaultPrevented}return!0}}const ae=[],Ze=[];let re=[];const Je=[],un=Promise.resolve();let Ae=!1;function cn(){Ae||(Ae=!0,un.then(Mt))}function Se(t){re.push(t)}const Ne=new Set;let fe=0;function Mt(){if(fe!==0)return;const t=de;do{try{for(;fe<ae.length;){const e=ae[fe];fe++,_e(e),_n(e.$$)}}catch(e){throw ae.length=0,fe=0,e}for(_e(null),ae.length=0,fe=0;Ze.length;)Ze.pop()();for(let e=0;e<re.length;e+=1){const n=re[e];Ne.has(n)||(Ne.add(n),n())}re.length=0}while(ae.length);for(;Je.length;)Je.pop()();Ae=!1,Ne.clear(),_e(t)}function _n(t){if(t.fragment!==null){t.update(),q(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Se)}}function gn(t){const e=[],n=[];re.forEach(s=>t.indexOf(s)===-1?e.push(s):n.push(s)),n.forEach(s=>s()),re=e}const ke=new Set;let le;function R(){le={r:0,c:[],p:le}}function K(){le.r||q(le.c),le=le.p}function p(t,e){t&&t.i&&(ke.delete(t),t.i(e))}function b(t,e,n,s){if(t&&t.o){if(ke.has(t))return;ke.add(t),le.c.push(()=>{ke.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}else s&&s()}function mn(t,e){t.d(1),e.delete(t.key)}function Ie(t,e){b(t,1,1,()=>{e.delete(t.key)})}function ve(t,e,n,s,i,l,f,o,a,r,h,_){let w=t.length,g=l.length,u=w;const c={};for(;u--;)c[t[u].key]=u;const $=[],v=new Map,F=new Map,j=[];for(u=g;u--;){const D=_(i,l,u),G=n(D);let z=f.get(G);z?s&&j.push(()=>z.p(D,e)):(z=r(G,D),z.c()),v.set(G,$[u]=z),G in c&&F.set(G,Math.abs(u-c[G]))}const C=new Set,B=new Set;function T(D){p(D,1),D.m(o,h),f.set(D.key,D),h=D.first,g--}for(;w&&g;){const D=$[g-1],G=t[w-1],z=D.key,k=G.key;D===G?(h=D.first,w--,g--):v.has(k)?!f.has(z)||C.has(z)?T(D):B.has(k)?w--:F.get(z)>F.get(k)?(B.add(z),T(D)):(C.add(k),w--):(a(G,f),w--)}for(;w--;){const D=t[w];v.has(D.key)||a(D,f)}for(;g;)T($[g-1]);return q(j),$}function hn(t,e){const n={},s={},i={$$scope:1};let l=t.length;for(;l--;){const f=t[l],o=e[l];if(o){for(const a in f)a in o||(s[a]=1);for(const a in o)i[a]||(n[a]=o[a],i[a]=1);t[l]=o}else for(const a in f)i[a]=1}for(const f in s)f in n||(n[f]=void 0);return n}function dn(t){return typeof t=="object"&&t!==null?t:{}}function L(t){t&&t.c()}function N(t,e,n,s){const{fragment:i,after_update:l}=t.$$;i&&i.m(e,n),s||Se(()=>{const f=t.$$.on_mount.map(vt).filter(jt);t.$$.on_destroy?t.$$.on_destroy.push(...f):q(f),t.$$.on_mount=[]}),l.forEach(Se)}function M(t,e){const n=t.$$;n.fragment!==null&&(gn(n.after_update),q(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function pn(t,e){t.$$.dirty[0]===-1&&(ae.push(t),cn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function X(t,e,n,s,i,l,f,o=[-1]){const a=de;_e(t);const r=t.$$={fragment:null,ctx:[],props:l,update:H,not_equal:i,bound:Ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Ke(),dirty:o,skip_bound:!1,root:e.target||a.$$.root};f&&f(r.root);let h=!1;if(r.ctx=n?n(t,e.props||{},(_,w,...g)=>{const u=g.length?g[0]:w;return r.ctx&&i(r.ctx[_],r.ctx[_]=u)&&(!r.skip_bound&&r.bound[_]&&r.bound[_](u),h&&pn(t,_)),w}):[],r.update(),h=!0,q(r.before_update),r.fragment=s?s(r.ctx):!1,e.target){if(e.hydrate){const _=on(e.target);r.fragment&&r.fragment.l(_),_.forEach(y)}else r.fragment&&r.fragment.c();e.intro&&p(t.$$.fragment),N(t,e.target,e.anchor,e.customElement),Mt()}_e(a)}class Z{$destroy(){M(this,1),this.$destroy=H}$on(e,n){if(!jt(n))return H;const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(e){this.$$set&&!sn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function bn(t){let e,n;return{c(){e=me("svg"),n=me("use"),we(n,"xlink:href",t[0]),d(e,"style",t[2]),d(e,"class",t[1])},m(s,i){E(s,e,i),O(e,n)},p(s,[i]){i&1&&we(n,"xlink:href",s[0]),i&4&&d(e,"style",s[2]),i&2&&d(e,"class",s[1])},i:H,o:H,d(s){s&&y(e)}}}function kn(t,e,n){let{icon:s}=e,{className:i=void 0}=e,{style:l=void 0}=e;return t.$$set=f=>{"icon"in f&&n(0,s=f.icon),"className"in f&&n(1,i=f.className),"style"in f&&n(2,l=f.style)},[s,i,l]}class je extends Z{constructor(e){super(),X(this,e,kn,bn,W,{icon:0,className:1,style:2})}}function $n(t){let e,n;return{c(){e=me("svg"),n=me("use"),we(n,"xlink:href",t[1]),d(e,"style",t[3]),d(e,"class",t[2]),S(e,"b3-list-item__arrow--open",t[0])},m(s,i){E(s,e,i),O(e,n)},p(s,[i]){i&2&&we(n,"xlink:href",s[1]),i&8&&d(e,"style",s[3]),i&4&&d(e,"class",s[2]),i&5&&S(e,"b3-list-item__arrow--open",s[0])},i:H,o:H,d(s){s&&y(e)}}}function wn(t,e,n){let{open:s=!1}=e,{icon:i="#iconRight"}=e,{className:l="b3-list-item__arrow"}=e,{style:f=void 0}=e;return t.$$set=o=>{"open"in o&&n(0,s=o.open),"icon"in o&&n(1,i=o.icon),"className"in o&&n(2,l=o.className),"style"in o&&n(3,f=o.style)},[s,i,l,f]}class Sn extends Z{constructor(e){super(),X(this,e,wn,$n,W,{open:0,icon:1,className:2,style:3})}}function Qe(t){let e,n,s,i,l;return n=new Sn({props:{open:!t[0]}}),{c(){e=A("span"),L(n.$$.fragment),d(e,"class","b3-list-item__toggle svelte-uo5hdf")},m(f,o){E(f,e,o),N(n,e,null),s=!0,i||(l=U(e,"click",t[7]),i=!0)},p(f,o){const a={};o&1&&(a.open=!f[0]),n.$set(a)},i(f){s||(p(n.$$.fragment,f),s=!0)},o(f){b(n.$$.fragment,f),s=!1},d(f){f&&y(e),M(n),i=!1,l()}}}function yn(t){let e,n;return{c(){e=A("img"),d(e,"class","b3-list-item__graphic"),d(e,"alt","icon"),We(e.src,n=t[5])||d(e,"src",n)},m(s,i){E(s,e,i)},p(s,i){i&32&&!We(e.src,n=s[5])&&d(e,"src",n)},i:H,o:H,d(s){s&&y(e)}}}function En(t){let e,n;return{c(){e=A("span"),n=x(t[4]),d(e,"class","b3-list-item__graphic")},m(s,i){E(s,e,i),O(e,n)},p(s,i){i&16&&pe(n,s[4])},i:H,o:H,d(s){s&&y(e)}}}function vn(t){let e,n;return e=new je({props:{className:"b3-list-item__graphic",icon:t[4]}}),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&16&&(l.icon=s[4]),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function xe(t){let e,n;return{c(){e=A("span"),n=x(t[2]),d(e,"class","b3-list-item__meta")},m(s,i){E(s,e,i),O(e,n)},p(s,i){i&4&&pe(n,s[2])},d(s){s&&y(e)}}}function et(t){let e,n;return e=new Oe({props:{items:t[6],className:null,fn__none:t[0],flex_1:!1}}),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&64&&(l.items=s[6]),i&1&&(l.fn__none=s[0]),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function jn(t){let e,n,s,i,l,f,o,a,r,h,_,w,g=t[6].length>0&&Qe(t);const u=[vn,En,yn],c=[];function $(j,C){return C&16&&(s=null),s==null&&(s=!!j[4].startsWith("#")),s?0:j[4]?1:j[5]?2:-1}~(i=$(t,-1))&&(l=c[i]=u[i](t));let v=t[2]&&xe(t),F=t[6].length>0&&et(t);return{c(){e=A("li"),g&&g.c(),n=I(),l&&l.c(),f=I(),o=A("span"),a=x(t[1]),r=I(),v&&v.c(),h=I(),F&&F.c(),_=oe(),d(o,"class","b3-list-item__text"),d(o,"style",t[3]),d(e,"class","b3-list-item svelte-uo5hdf")},m(j,C){E(j,e,C),g&&g.m(e,null),O(e,n),~i&&c[i].m(e,null),O(e,f),O(e,o),O(o,a),O(e,r),v&&v.m(e,null),E(j,h,C),F&&F.m(j,C),E(j,_,C),w=!0},p(j,[C]){j[6].length>0?g?(g.p(j,C),C&64&&p(g,1)):(g=Qe(j),g.c(),p(g,1),g.m(e,n)):g&&(R(),b(g,1,1,()=>{g=null}),K());let B=i;i=$(j,C),i===B?~i&&c[i].p(j,C):(l&&(R(),b(c[B],1,1,()=>{c[B]=null}),K()),~i?(l=c[i],l?l.p(j,C):(l=c[i]=u[i](j),l.c()),p(l,1),l.m(e,f)):l=null),(!w||C&2)&&pe(a,j[1]),(!w||C&8)&&d(o,"style",j[3]),j[2]?v?v.p(j,C):(v=xe(j),v.c(),v.m(e,null)):v&&(v.d(1),v=null),j[6].length>0?F?(F.p(j,C),C&64&&p(F,1)):(F=et(j),F.c(),p(F,1),F.m(_.parentNode,_)):F&&(R(),b(F,1,1,()=>{F=null}),K())},i(j){w||(p(g),p(l),p(F),w=!0)},o(j){b(g),b(l),b(F),w=!1},d(j){j&&y(e),g&&g.d(),~i&&c[i].d(),v&&v.d(),j&&y(h),F&&F.d(j),j&&y(_)}}}function Nn(t,e,n){let{text:s}=e,{meta:i=""}=e,{style:l=""}=e,{icon:f=""}=e,{src:o=""}=e,{children:a=[]}=e,{fold:r=!0}=e;function h(){n(0,r=!r)}return t.$$set=_=>{"text"in _&&n(1,s=_.text),"meta"in _&&n(2,i=_.meta),"style"in _&&n(3,l=_.style),"icon"in _&&n(4,f=_.icon),"src"in _&&n(5,o=_.src),"children"in _&&n(6,a=_.children),"fold"in _&&n(0,r=_.fold)},[r,s,i,l,f,o,a,h]}class Mn extends Z{constructor(e){super(),X(this,e,Nn,jn,W,{text:1,meta:2,style:3,icon:4,src:5,children:6,fold:0})}}function tt(t,e,n){const s=t.slice();return s[5]=e[n],s[7]=n,s}function nt(t,e){let n,s,i;const l=[e[5]];let f={};for(let o=0;o<l.length;o+=1)f=Et(f,l[o]);return s=new Mn({props:f}),{key:t,first:null,c(){n=oe(),L(s.$$.fragment),this.first=n},m(o,a){E(o,n,a),N(s,o,a),i=!0},p(o,a){e=o;const r=a&1?hn(l,[dn(e[5])]):{};s.$set(r)},i(o){i||(p(s.$$.fragment,o),i=!0)},o(o){b(s.$$.fragment,o),i=!1},d(o){o&&y(n),M(s,o)}}}function Ln(t){let e,n=[],s=new Map,i,l=t[0];const f=o=>o[7];for(let o=0;o<l.length;o+=1){let a=tt(t,l,o),r=f(a);s.set(r,n[o]=nt(r,a))}return{c(){e=A("ul");for(let o=0;o<n.length;o+=1)n[o].c();d(e,"class",t[1]),S(e,"fn__none",t[2]),S(e,"fn__flex-1",t[3]),he(e,"width",t[4]>0?`${t[4]}px`:void 0)},m(o,a){E(o,e,a);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);i=!0},p(o,[a]){a&1&&(l=o[0],R(),n=ve(n,a,f,1,o,l,s,e,Ie,nt,null,tt),K()),(!i||a&2)&&d(e,"class",o[1]),(!i||a&6)&&S(e,"fn__none",o[2]),(!i||a&10)&&S(e,"fn__flex-1",o[3]),a&16&&he(e,"width",o[4]>0?`${o[4]}px`:void 0)},i(o){if(!i){for(let a=0;a<l.length;a+=1)p(n[a]);i=!0}},o(o){for(let a=0;a<n.length;a+=1)b(n[a]);i=!1},d(o){o&&y(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function An(t,e,n){let{items:s=[]}=e,{className:i="b3-list b3-list--background"}=e,{fn__none:l=!1}=e,{flex_1:f=!0}=e,{width:o=0}=e;return t.$$set=a=>{"items"in a&&n(0,s=a.items),"className"in a&&n(1,i=a.className),"fn__none"in a&&n(2,l=a.fn__none),"flex_1"in a&&n(3,f=a.flex_1),"width"in a&&n(4,o=a.width)},[s,i,l,f,o]}class Oe extends Z{constructor(e){super(),X(this,e,An,Ln,W,{items:0,className:1,fn__none:2,flex_1:3,width:4})}}const On=t=>({focus:t&1}),st=t=>({focus:t[0]});function it(t,e,n){const s=t.slice();return s[12]=e[n],s}function lt(t){let e,n,s,i,l,f,o;return n=new je({props:{icon:"#iconSearch",className:"b3-form__icon-icon"}}),{c(){e=A("div"),L(n.$$.fragment),s=I(),i=A("input"),d(i,"placeholder",t[4]),d(i,"class","b3-text-field fn__block b3-form__icon-input"),d(e,"class","b3-form__icon")},m(a,r){E(a,e,r),N(n,e,null),O(e,s),O(e,i),Q(i,t[1]),l=!0,f||(o=[U(i,"input",t[9]),U(i,"change",t[5])],f=!0)},p(a,r){(!l||r&16)&&d(i,"placeholder",a[4]),r&2&&i.value!==a[1]&&Q(i,a[1])},i(a){l||(p(n.$$.fragment,a),l=!0)},o(a){b(n.$$.fragment,a),l=!1},d(a){a&&y(e),M(n),f=!1,q(o)}}}function ot(t,e){let n,s,i,l,f=e[12].text+"",o,a,r,h,_;s=new je({props:{icon:e[12].icon,className:"b3-list-item__graphic"}});function w(){return e[10](e[12])}return{key:t,first:null,c(){n=A("li"),L(s.$$.fragment),i=I(),l=A("span"),o=I(),d(l,"class","b3-list-item__text svelte-15drd7h"),d(n,"data-name",a=e[12].name),d(n,"class","b3-list-item"),S(n,"b3-list-item--focus",e[12].key===e[0]),this.first=n},m(g,u){E(g,n,u),N(s,n,null),O(n,i),O(n,l),l.innerHTML=f,O(n,o),r=!0,h||(_=U(n,"click",w),h=!0)},p(g,u){e=g;const c={};u&4&&(c.icon=e[12].icon),s.$set(c),(!r||u&4)&&f!==(f=e[12].text+"")&&(l.innerHTML=f),(!r||u&4&&a!==(a=e[12].name))&&d(n,"data-name",a),(!r||u&5)&&S(n,"b3-list-item--focus",e[12].key===e[0])},i(g){r||(p(s.$$.fragment,g),r=!0)},o(g){b(s.$$.fragment,g),r=!1},d(g){g&&y(n),M(s),h=!1,_()}}}function Tn(t){let e;return{c(){e=x("Container")},m(n,s){E(n,e,s)},d(n){n&&y(e)}}}function In(t){let e,n,s,i=[],l=new Map,f,o,a=t[3]&&lt(t),r=t[2];const h=u=>u[12].key;for(let u=0;u<r.length;u+=1){let c=it(t,r,u),$=h(c);l.set($,i[u]=ot($,c))}const _=t[8].default,w=te(_,t,t[7],st),g=w||Tn();return{c(){e=A("div"),n=A("ul"),a&&a.c(),s=I();for(let u=0;u<i.length;u+=1)i[u].c();f=I(),g&&g.c(),d(n,"class","b3-tab-bar b3-list b3-list--background"),d(e,"class","fn__flex-1 fn__flex config__panel")},m(u,c){E(u,e,c),O(e,n),a&&a.m(n,null),O(n,s);for(let $=0;$<i.length;$+=1)i[$]&&i[$].m(n,null);O(e,f),g&&g.m(e,null),o=!0},p(u,[c]){u[3]?a?(a.p(u,c),c&8&&p(a,1)):(a=lt(u),a.c(),p(a,1),a.m(n,s)):a&&(R(),b(a,1,1,()=>{a=null}),K()),c&69&&(r=u[2],R(),i=ve(i,c,h,1,u,r,l,n,Ie,ot,null,it),K()),w&&w.p&&(!o||c&129)&&se(w,_,u,u[7],o?ne(_,u[7],c,On):ie(u[7]),st)},i(u){if(!o){p(a);for(let c=0;c<r.length;c+=1)p(i[c]);p(g,u),o=!0}},o(u){b(a);for(let c=0;c<i.length;c+=1)b(i[c]);b(g,u),o=!1},d(u){u&&y(e),a&&a.d();for(let c=0;c<i.length;c+=1)i[c].d();g&&g.d(u)}}}function Fn(t,e,n){let{$$slots:s={},$$scope:i}=e,{panels:l}=e,{focus:f}=e,{searchEnable:o=!1}=e,{searchPlaceholder:a=""}=e,{searchValue:r=""}=e;const h=Te();function _(){h("search-changed",{value:r})}function w(c){h("changed",{key:c}),n(0,f=c)}function g(){r=this.value,n(1,r)}const u=c=>w(c.key);return t.$$set=c=>{"panels"in c&&n(2,l=c.panels),"focus"in c&&n(0,f=c.focus),"searchEnable"in c&&n(3,o=c.searchEnable),"searchPlaceholder"in c&&n(4,a=c.searchPlaceholder),"searchValue"in c&&n(1,r=c.searchValue),"$$scope"in c&&n(7,i=c.$$scope)},[f,r,l,o,a,_,w,i,s,g,u]}class Cn extends Z{constructor(e){super(),X(this,e,Fn,In,W,{panels:2,focus:0,searchEnable:3,searchPlaceholder:4,searchValue:1})}}function Dn(t){let e,n;const s=t[3].default,i=te(s,t,t[2],null);return{c(){e=A("div"),i&&i.c(),d(e,"data-name",t[1]),d(e,"class","config__tab-container"),S(e,"fn__none",!t[0])},m(l,f){E(l,e,f),i&&i.m(e,null),n=!0},p(l,[f]){i&&i.p&&(!n||f&4)&&se(i,s,l,l[2],n?ne(s,l[2],f,null):ie(l[2]),null),(!n||f&2)&&d(e,"data-name",l[1]),(!n||f&1)&&S(e,"fn__none",!l[0])},i(l){n||(p(i,l),n=!0)},o(l){b(i,l),n=!1},d(l){l&&y(e),i&&i.d(l)}}}function Vn(t,e,n){let{$$slots:s={},$$scope:i}=e,{display:l=!0}=e,{name:f=""}=e;return t.$$set=o=>{"display"in o&&n(0,l=o.display),"name"in o&&n(1,f=o.name),"$$scope"in o&&n(2,i=o.$$scope)},[l,f,i,s]}class Me extends Z{constructor(e){super(),X(this,e,Vn,Dn,W,{display:0,name:1})}}const zn=t=>({}),ft=t=>({}),Bn=t=>({}),at=t=>({});function rt(t){let e,n;const s=t[6].icon,i=te(s,t,t[5],at);return{c(){e=A("span"),i&&i.c(),d(e,"class","item__icon")},m(l,f){E(l,e,f),i&&i.m(e,null),n=!0},p(l,f){i&&i.p&&(!n||f&32)&&se(i,s,l,l[5],n?ne(s,l[5],f,Bn):ie(l[5]),at)},i(l){n||(p(i,l),n=!0)},o(l){b(i,l),n=!1},d(l){l&&y(e),i&&i.d(l)}}}function Gn(t){let e;return{c(){e=x("text")},m(n,s){E(n,e,s)},d(n){n&&y(e)}}}function Un(t){let e,n,s,i,l,f,o,a,r,h,_=t[3].icon&&rt(t);const w=t[6].text,g=te(w,t,t[5],ft),u=g||Gn();return{c(){e=A("div"),n=A("span"),s=I(),_&&_.c(),i=I(),l=A("span"),u&&u.c(),f=I(),o=A("span"),d(n,"class","fn__flex-1"),d(l,"class","item__text"),d(o,"class","fn__flex-1"),d(e,"data-type",t[0]),d(e,"class","item item--full"),S(e,"item--focus",t[1])},m(c,$){E(c,e,$),O(e,n),O(e,s),_&&_.m(e,null),O(e,i),O(e,l),u&&u.m(l,null),O(e,f),O(e,o),a=!0,r||(h=U(e,"click",t[2]),r=!0)},p(c,[$]){c[3].icon?_?(_.p(c,$),$&8&&p(_,1)):(_=rt(c),_.c(),p(_,1),_.m(e,i)):_&&(R(),b(_,1,1,()=>{_=null}),K()),g&&g.p&&(!a||$&32)&&se(g,w,c,c[5],a?ne(w,c[5],$,zn):ie(c[5]),ft),(!a||$&1)&&d(e,"data-type",c[0]),(!a||$&2)&&S(e,"item--focus",c[1])},i(c){a||(p(_),p(u,c),a=!0)},o(c){b(_),b(u,c),a=!1},d(c){c&&y(e),_&&_.d(),u&&u.d(c),r=!1,h()}}}function Hn(t,e,n){let{$$slots:s={},$$scope:i}=e;const l=ln(s);let{key:f}=e,{name:o=""}=e,{focus:a=!1}=e;const r=Te();function h(){a||r("changed",{key:f})}return t.$$set=_=>{"key"in _&&n(4,f=_.key),"name"in _&&n(0,o=_.name),"focus"in _&&n(1,a=_.focus),"$$scope"in _&&n(5,i=_.$$scope)},[o,a,h,l,f,i,s]}class Pn extends Z{constructor(e){super(),X(this,e,Hn,Un,W,{key:4,name:0,focus:1})}}const Yn=t=>({focus:t&1}),ut=t=>({focus:t[0]});function ct(t,e,n){const s=t.slice();return s[5]=e[n],s}function qn(t){let e,n=t[5].icon+"",s;return{c(){e=new Ee(!1),s=oe(),e.a=s},m(i,l){e.m(n,i,l),E(i,s,l)},p(i,l){l&2&&n!==(n=i[5].icon+"")&&e.p(n)},i:H,o:H,d(i){i&&y(s),i&&e.d()}}}function Rn(t){let e,n;return e=new je({props:{icon:t[5].icon}}),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&2&&(l.icon=s[5].icon),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Kn(t){let e,n,s,i,l,f;const o=[Rn,qn],a=[];function r(h,_){return _&2&&(n=null),n==null&&(n=!!h[5].icon.startsWith("#")),n?0:1}return s=r(t,-1),i=a[s]=o[s](t),{c(){e=A("span"),i.c(),l=I(),d(e,"slot","icon")},m(h,_){E(h,e,_),a[s].m(e,null),O(e,l),f=!0},p(h,_){let w=s;s=r(h,_),s===w?a[s].p(h,_):(R(),b(a[w],1,1,()=>{a[w]=null}),K(),i=a[s],i?i.p(h,_):(i=a[s]=o[s](h),i.c()),p(i,1),i.m(e,l))},i(h){f||(p(i),f=!0)},o(h){b(i),f=!1},d(h){h&&y(e),a[s].d()}}}function Wn(t){let e,n,s=t[5].text+"",i;return{c(){e=A("span"),n=new Ee(!1),i=I(),n.a=i,d(e,"slot","text")},m(l,f){E(l,e,f),n.m(s,e),O(e,i)},p(l,f){f&2&&s!==(s=l[5].text+"")&&n.p(s)},d(l){l&&y(e)}}}function _t(t,e){let n,s,i;return s=new Pn({props:{key:e[5].key,name:e[5].name,focus:e[5].key===e[0],$$slots:{text:[Wn],icon:[Kn]},$$scope:{ctx:e}}}),s.$on("changed",e[2]),{key:t,first:null,c(){n=oe(),L(s.$$.fragment),this.first=n},m(l,f){E(l,n,f),N(s,l,f),i=!0},p(l,f){e=l;const o={};f&2&&(o.key=e[5].key),f&2&&(o.name=e[5].name),f&3&&(o.focus=e[5].key===e[0]),f&18&&(o.$$scope={dirty:f,ctx:e}),s.$set(o)},i(l){i||(p(s.$$.fragment,l),i=!0)},o(l){b(s.$$.fragment,l),i=!1},d(l){l&&y(n),M(s,l)}}}function Xn(t){let e;return{c(){e=x("Container")},m(n,s){E(n,e,s)},d(n){n&&y(e)}}}function Zn(t){let e,n,s=[],i=new Map,l,f,o,a=t[1];const r=g=>g[5].key;for(let g=0;g<a.length;g+=1){let u=ct(t,a,g),c=r(u);i.set(c,s[g]=_t(c,u))}const h=t[3].default,_=te(h,t,t[4],ut),w=_||Xn();return{c(){e=A("div"),n=A("div");for(let g=0;g<s.length;g+=1)s[g].c();l=I(),f=A("div"),w&&w.c(),d(n,"class","layout-tab-bar fn__flex"),d(f,"class","fn__flex-1"),d(e,"class","fn__flex-column"),he(e,"height","100%")},m(g,u){E(g,e,u),O(e,n);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(n,null);O(e,l),O(e,f),w&&w.m(f,null),o=!0},p(g,[u]){u&7&&(a=g[1],R(),s=ve(s,u,r,1,g,a,i,n,Ie,_t,null,ct),K()),_&&_.p&&(!o||u&17)&&se(_,h,g,g[4],o?ne(h,g[4],u,Yn):ie(g[4]),ut)},i(g){if(!o){for(let u=0;u<a.length;u+=1)p(s[u]);p(w,g),o=!0}},o(g){for(let u=0;u<s.length;u+=1)b(s[u]);b(w,g),o=!1},d(g){g&&y(e);for(let u=0;u<s.length;u+=1)s[u].d();w&&w.d(g)}}}function Jn(t,e,n){let{$$slots:s={},$$scope:i}=e,{tabs:l}=e,{focus:f}=e;function o(a){n(0,f=a.detail.key)}return t.$$set=a=>{"tabs"in a&&n(1,l=a.tabs),"focus"in a&&n(0,f=a.focus),"$$scope"in a&&n(4,i=a.$$scope)},[f,l,o,s,i]}class Qn extends Z{constructor(e){super(),X(this,e,Jn,Zn,W,{tabs:1,focus:0})}}const xn=t=>({}),gt=t=>({}),es=t=>({}),mt=t=>({}),ts=t=>({}),ht=t=>({}),ns=t=>({}),dt=t=>({});function ss(t){let e,n;return{c(){e=new Ee(!1),n=oe(),e.a=n},m(s,i){e.m(t[0],s,i),E(s,n,i)},p(s,i){i&1&&e.p(s[0])},d(s){s&&y(n),s&&e.d()}}}function is(t){let e,n;return{c(){e=new Ee(!1),n=oe(),e.a=n},m(s,i){e.m(t[1],s,i),E(s,n,i)},p(s,i){i&2&&e.p(s[1])},d(s){s&&y(n),s&&e.d()}}}function pt(t){let e,n,s;const i=t[4].input,l=te(i,t,t[3],mt);return{c(){e=A("div"),n=I(),l&&l.c(),d(e,"class","fn__hr")},m(f,o){E(f,e,o),E(f,n,o),l&&l.m(f,o),s=!0},p(f,o){l&&l.p&&(!s||o&8)&&se(l,i,f,f[3],s?ne(i,f[3],o,es):ie(f[3]),mt)},i(f){s||(p(l,f),s=!0)},o(f){b(l,f),s=!1},d(f){f&&y(e),f&&y(n),l&&l.d(f)}}}function bt(t){let e,n,s;const i=t[4].input,l=te(i,t,t[3],gt);return{c(){e=A("span"),n=I(),l&&l.c(),d(e,"class","fn__space")},m(f,o){E(f,e,o),E(f,n,o),l&&l.m(f,o),s=!0},p(f,o){l&&l.p&&(!s||o&8)&&se(l,i,f,f[3],s?ne(i,f[3],o,xn):ie(f[3]),gt)},i(f){s||(p(l,f),s=!0)},o(f){b(l,f),s=!1},d(f){f&&y(e),f&&y(n),l&&l.d(f)}}}function ls(t){let e,n,s,i,l,f,o;const a=t[4].title,r=te(a,t,t[3],dt),h=r||ss(t),_=t[4].text,w=te(_,t,t[3],ht),g=w||is(t);let u=t[2]&&pt(t),c=!t[2]&&bt(t);return{c(){e=A("label"),n=A("div"),h&&h.c(),s=I(),i=A("div"),g&&g.c(),l=I(),u&&u.c(),f=I(),c&&c.c(),d(i,"class","b3-label__text"),d(n,"class","fn__flex-1 svelte-2m76cy"),S(n,"visible",t[2]),d(e,"class","fn__flex b3-label")},m($,v){E($,e,v),O(e,n),h&&h.m(n,null),O(n,s),O(n,i),g&&g.m(i,null),O(n,l),u&&u.m(n,null),O(e,f),c&&c.m(e,null),o=!0},p($,[v]){r?r.p&&(!o||v&8)&&se(r,a,$,$[3],o?ne(a,$[3],v,ns):ie($[3]),dt):h&&h.p&&(!o||v&1)&&h.p($,o?v:-1),w?w.p&&(!o||v&8)&&se(w,_,$,$[3],o?ne(_,$[3],v,ts):ie($[3]),ht):g&&g.p&&(!o||v&2)&&g.p($,o?v:-1),$[2]?u?(u.p($,v),v&4&&p(u,1)):(u=pt($),u.c(),p(u,1),u.m(n,null)):u&&(R(),b(u,1,1,()=>{u=null}),K()),(!o||v&4)&&S(n,"visible",$[2]),$[2]?c&&(R(),b(c,1,1,()=>{c=null}),K()):c?(c.p($,v),v&4&&p(c,1)):(c=bt($),c.c(),p(c,1),c.m(e,null))},i($){o||(p(h,$),p(g,$),p(u),p(c),o=!0)},o($){b(h,$),b(g,$),b(u),b(c),o=!1},d($){$&&y(e),h&&h.d($),g&&g.d($),u&&u.d(),c&&c.d()}}}function os(t,e,n){let{$$slots:s={},$$scope:i}=e,{title:l=""}=e,{text:f=""}=e,{block:o=!1}=e;return t.$$set=a=>{"title"in a&&n(0,l=a.title),"text"in a&&n(1,f=a.text),"block"in a&&n(2,o=a.block),"$$scope"in a&&n(3,i=a.$$scope)},[l,f,o,i,s]}class P extends Z{constructor(e){super(),X(this,e,os,ls,W,{title:0,text:1,block:2})}}var V=(t=>(t[t.checkbox=0]="checkbox",t[t.text=1]="text",t[t.number=2]="number",t[t.slider=3]="slider",t[t.button=4]="button",t[t.select=5]="select",t[t.textarea=6]="textarea",t))(V||{});function kt(t,e,n){const s=t.slice();return s[19]=e[n],s}function fs(t){let e,n,s;return{c(){e=A("textarea"),e.disabled=t[2],d(e,"class","b3-text-field"),d(e,"placeholder",t[5]),S(e,"fn__block",t[3]),S(e,"fn__size200",!t[3]&&t[4]),he(e,"height",t[8]>0?`${t[8]}px`:void 0)},m(i,l){E(i,e,l),Q(e,t[0]),n||(s=[U(e,"input",t[17]),U(e,"change",t[10])],n=!0)},p(i,l){l&4&&(e.disabled=i[2]),l&32&&d(e,"placeholder",i[5]),l&65&&Q(e,i[0]),l&8&&S(e,"fn__block",i[3]),l&24&&S(e,"fn__size200",!i[3]&&i[4]),l&256&&he(e,"height",i[8]>0?`${i[8]}px`:void 0)},d(i){i&&y(e),n=!1,q(s)}}}function as(t){let e,n=[],s=new Map,i,l,f=t[6];const o=a=>a[19].key;for(let a=0;a<f.length;a+=1){let r=kt(t,f,a),h=o(r);s.set(h,n[a]=$t(h,r))}return{c(){e=A("select");for(let a=0;a<n.length;a+=1)n[a].c();e.disabled=t[2],d(e,"class","b3-select"),t[0]===void 0&&Se(()=>t[16].call(e)),S(e,"fn__block",t[3]),S(e,"fn__size200",!t[3]&&t[4]),S(e,"fn__flex-center",!t[3])},m(a,r){E(a,e,r);for(let h=0;h<n.length;h+=1)n[h]&&n[h].m(e,null);Xe(e,t[0],!0),i||(l=[U(e,"change",t[16]),U(e,"change",t[10])],i=!0)},p(a,r){r&64&&(f=a[6],n=ve(n,r,o,1,a,f,s,e,mn,$t,null,kt)),r&4&&(e.disabled=a[2]),r&65&&Xe(e,a[0]),r&8&&S(e,"fn__block",a[3]),r&24&&S(e,"fn__size200",!a[3]&&a[4]),r&8&&S(e,"fn__flex-center",!a[3])},d(a){a&&y(e);for(let r=0;r<n.length;r+=1)n[r].d();i=!1,q(l)}}}function rs(t){let e,n,s,i;return{c(){e=A("button"),n=x(t[0]),e.disabled=t[2],d(e,"class","b3-button b3-button--outline"),S(e,"fn__block",t[3]),S(e,"fn__size200",!t[3]&&t[4]),S(e,"fn__flex-center",!t[3])},m(l,f){E(l,e,f),O(e,n),s||(i=U(e,"click",t[9]),s=!0)},p(l,f){f&1&&pe(n,l[0]),f&4&&(e.disabled=l[2]),f&8&&S(e,"fn__block",l[3]),f&24&&S(e,"fn__size200",!l[3]&&l[4]),f&8&&S(e,"fn__flex-center",!l[3])},d(l){l&&y(e),s=!1,i()}}}function us(t){let e,n,s,i,l,f;return{c(){e=A("input"),e.disabled=t[2],d(e,"class","b3-slider svelte-edt8og"),d(e,"type","range"),d(e,"min",n=t[7].min),d(e,"max",s=t[7].max),d(e,"step",i=t[7].step),S(e,"fn__block",t[3]),S(e,"fn__size200",!t[3]&&t[4])},m(o,a){E(o,e,a),Q(e,t[0]),l||(f=[U(e,"change",t[15]),U(e,"input",t[15]),U(e,"change",t[10])],l=!0)},p(o,a){a&4&&(e.disabled=o[2]),a&128&&n!==(n=o[7].min)&&d(e,"min",n),a&128&&s!==(s=o[7].max)&&d(e,"max",s),a&128&&i!==(i=o[7].step)&&d(e,"step",i),a&65&&Q(e,o[0]),a&8&&S(e,"fn__block",o[3]),a&24&&S(e,"fn__size200",!o[3]&&o[4])},d(o){o&&y(e),l=!1,q(f)}}}function cs(t){let e,n,s,i,l,f;return{c(){e=A("input"),e.disabled=t[2],d(e,"class","b3-text-field"),d(e,"type","number"),d(e,"placeholder",t[5]),d(e,"min",n=t[7].min),d(e,"max",s=t[7].max),d(e,"step",i=t[7].step),S(e,"fn__block",t[3]),S(e,"fn__size200",!t[3]&&t[4]),S(e,"fn__flex-center",!t[3])},m(o,a){E(o,e,a),Q(e,t[0]),l||(f=[U(e,"input",t[14]),U(e,"change",t[10])],l=!0)},p(o,a){a&4&&(e.disabled=o[2]),a&32&&d(e,"placeholder",o[5]),a&128&&n!==(n=o[7].min)&&d(e,"min",n),a&128&&s!==(s=o[7].max)&&d(e,"max",s),a&128&&i!==(i=o[7].step)&&d(e,"step",i),a&65&&Le(e.value)!==o[0]&&Q(e,o[0]),a&8&&S(e,"fn__block",o[3]),a&24&&S(e,"fn__size200",!o[3]&&o[4]),a&8&&S(e,"fn__flex-center",!o[3])},d(o){o&&y(e),l=!1,q(f)}}}function _s(t){let e,n,s;return{c(){e=A("input"),e.disabled=t[2],d(e,"class","b3-text-field"),d(e,"placeholder",t[5]),S(e,"fn__block",t[3]),S(e,"fn__size200",!t[3]&&t[4]),S(e,"fn__flex-center",!t[3])},m(i,l){E(i,e,l),Q(e,t[0]),n||(s=[U(e,"input",t[13]),U(e,"change",t[10])],n=!0)},p(i,l){l&4&&(e.disabled=i[2]),l&32&&d(e,"placeholder",i[5]),l&65&&e.value!==i[0]&&Q(e,i[0]),l&8&&S(e,"fn__block",i[3]),l&24&&S(e,"fn__size200",!i[3]&&i[4]),l&8&&S(e,"fn__flex-center",!i[3])},d(i){i&&y(e),n=!1,q(s)}}}function gs(t){let e,n,s;return{c(){e=A("input"),e.disabled=t[2],d(e,"class","b3-switch svelte-edt8og"),d(e,"type","checkbox"),S(e,"fn__block",t[3]),S(e,"fn__flex-center",!t[3])},m(i,l){E(i,e,l),e.checked=t[0],n||(s=[U(e,"change",t[12]),U(e,"change",t[10])],n=!0)},p(i,l){l&4&&(e.disabled=i[2]),l&65&&(e.checked=i[0]),l&8&&S(e,"fn__block",i[3]),l&8&&S(e,"fn__flex-center",!i[3])},d(i){i&&y(e),n=!1,q(s)}}}function $t(t,e){let n,s=e[19].text+"",i,l;return{key:t,first:null,c(){n=A("option"),i=x(s),n.__value=l=e[19].key,n.value=n.__value,this.first=n},m(f,o){E(f,n,o),O(n,i)},p(f,o){e=f,o&64&&s!==(s=e[19].text+"")&&pe(i,s),o&64&&l!==(l=e[19].key)&&(n.__value=l,n.value=n.__value)},d(f){f&&y(n)}}}function ms(t){let e;function n(l,f){if(l[1]===V.checkbox)return gs;if(l[1]===V.text)return _s;if(l[1]===V.number)return cs;if(l[1]===V.slider)return us;if(l[1]===V.button)return rs;if(l[1]===V.select)return as;if(l[1]===V.textarea)return fs}let s=n(t),i=s&&s(t);return{c(){i&&i.c(),e=oe()},m(l,f){i&&i.m(l,f),E(l,e,f)},p(l,[f]){s===(s=n(l))&&i?i.p(l,f):(i&&i.d(1),i=s&&s(l),i&&(i.c(),i.m(e.parentNode,e)))},i:H,o:H,d(l){i&&i.d(l),l&&y(e)}}}function hs(t,e,n){let{type:s}=e,{settingKey:i}=e,{settingValue:l}=e,{disabled:f=!1}=e,{block:o=!1}=e,{normal:a=!0}=e,{placeholder:r=""}=e,{options:h=[]}=e,{limits:_={min:0,max:100,step:1}}=e,{height:w=0}=e;const g=Te();function u(T){g("clicked",{event:T})}function c(T){g("changed",{key:i,value:l,event:T})}function $(){l=this.checked,n(0,l),n(6,h)}function v(){l=this.value,n(0,l),n(6,h)}function F(){l=Le(this.value),n(0,l),n(6,h)}function j(){l=Le(this.value),n(0,l),n(6,h)}function C(){l=fn(this),n(0,l),n(6,h)}function B(){l=this.value,n(0,l),n(6,h)}return t.$$set=T=>{"type"in T&&n(1,s=T.type),"settingKey"in T&&n(11,i=T.settingKey),"settingValue"in T&&n(0,l=T.settingValue),"disabled"in T&&n(2,f=T.disabled),"block"in T&&n(3,o=T.block),"normal"in T&&n(4,a=T.normal),"placeholder"in T&&n(5,r=T.placeholder),"options"in T&&n(6,h=T.options),"limits"in T&&n(7,_=T.limits),"height"in T&&n(8,w=T.height)},[l,s,f,o,a,r,h,_,w,u,c,i,$,v,F,j,C,B]}class Y extends Z{constructor(e){super(),X(this,e,hs,ms,W,{type:1,settingKey:11,settingValue:0,disabled:2,block:3,normal:4,placeholder:5,options:6,limits:7,height:8})}}function ds(t){let e,n;return e=new Y({props:{slot:"input",type:V.button,settingKey:"Reset",settingValue:t[3].settings.generalSettings.reset.text}}),e.$on("clicked",t[5]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p:H,i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function ps(t){let e,n;return e=new Y({props:{slot:"input",type:V.button,settingKey:"showSystemFonts",settingValue:t[3].settings.generalSettings.showSystemFonts.text}}),e.$on("clicked",t[8]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p:H,i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function bs(t){let e,n;return e=new Y({props:{slot:"input",type:V.button,settingKey:"showSystemFonts",settingValue:t[3].settings.generalSettings.showUsableFonts.text}}),e.$on("clicked",t[9]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p:H,i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function ks(t){let e,n,s,i,l,f;return e=new P({props:{title:t[3].settings.generalSettings.reset.title,text:t[3].settings.generalSettings.reset.description,$$slots:{input:[ds]},$$scope:{ctx:t}}}),s=new P({props:{title:t[3].settings.generalSettings.showSystemFonts.title,text:t[3].settings.generalSettings.showSystemFonts.description,$$slots:{input:[ps]},$$scope:{ctx:t}}}),l=new P({props:{title:t[3].settings.generalSettings.showUsableFonts.title,text:t[3].settings.generalSettings.showUsableFonts.description,$$slots:{input:[bs]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment),n=I(),L(s.$$.fragment),i=I(),L(l.$$.fragment)},m(o,a){N(e,o,a),E(o,n,a),N(s,o,a),E(o,i,a),N(l,o,a),f=!0},p(o,a){const r={};a&67108864&&(r.$$scope={dirty:a,ctx:o}),e.$set(r);const h={};a&67108866&&(h.$$scope={dirty:a,ctx:o}),s.$set(h);const _={};a&67108866&&(_.$$scope={dirty:a,ctx:o}),l.$set(_)},i(o){f||(p(e.$$.fragment,o),p(s.$$.fragment,o),p(l.$$.fragment,o),f=!0)},o(o){b(e.$$.fragment,o),b(s.$$.fragment,o),b(l.$$.fragment,o),f=!1},d(o){M(e,o),o&&y(n),M(s,o),o&&y(i),M(l,o)}}}function $s(t){let e,n;return e=new Y({props:{slot:"input",type:V.checkbox,settingKey:"enable",settingValue:t[0].css.enable}}),e.$on("changed",t[10]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&1&&(l.settingValue=s[0].css.enable),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function ws(t){let e,n;return e=new Y({props:{slot:"input",block:!0,type:V.textarea,height:t[2],settingKey:"code",settingValue:t[0].css.code,placeholder:t[3].settings.cssSettings.snippet.placeholder}}),e.$on("changed",t[11]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&4&&(l.height=s[2]),i&1&&(l.settingValue=s[0].css.code),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Ss(t){let e,n,s,i;return e=new P({props:{title:t[3].settings.cssSettings.enable.title,text:t[3].settings.cssSettings.enable.description,$$slots:{input:[$s]},$$scope:{ctx:t}}}),s=new P({props:{block:!0,title:t[3].settings.cssSettings.snippet.title,text:t[3].settings.cssSettings.snippet.description,$$slots:{input:[ws]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment),n=I(),L(s.$$.fragment)},m(l,f){N(e,l,f),E(l,n,f),N(s,l,f),i=!0},p(l,f){const o={};f&67108865&&(o.$$scope={dirty:f,ctx:l}),e.$set(o);const a={};f&67108869&&(a.$$scope={dirty:f,ctx:l}),s.$set(a)},i(l){i||(p(e.$$.fragment,l),p(s.$$.fragment,l),i=!0)},o(l){b(e.$$.fragment,l),b(s.$$.fragment,l),i=!1},d(l){M(e,l),l&&y(n),M(s,l)}}}function ys(t){let e,n;return e=new Y({props:{slot:"input",type:V.checkbox,settingKey:"enable",settingValue:t[0].fonts.base.enable}}),e.$on("changed",t[12]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&1&&(l.settingValue=s[0].fonts.base.enable),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Es(t){let e,n;return e=new Y({props:{slot:"input",block:!0,type:V.textarea,height:t[2],settingKey:"list",settingValue:t[0].fonts.base.list.join(`
`),placeholder:t[3].settings.fontsSettings.base.fontsList.placeholder}}),e.$on("changed",t[13]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&4&&(l.height=s[2]),i&1&&(l.settingValue=s[0].fonts.base.list.join(`
`)),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function vs(t){let e,n;return e=new Y({props:{slot:"input",type:V.checkbox,settingKey:"enable",settingValue:t[0].fonts.code.enable}}),e.$on("changed",t[14]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&1&&(l.settingValue=s[0].fonts.code.enable),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function js(t){let e,n;return e=new Y({props:{slot:"input",block:!0,type:V.textarea,height:t[2],settingKey:"list",settingValue:t[0].fonts.code.list.join(`
`),placeholder:t[3].settings.fontsSettings.code.fontsList.placeholder}}),e.$on("changed",t[15]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&4&&(l.height=s[2]),i&1&&(l.settingValue=s[0].fonts.code.list.join(`
`)),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Ns(t){let e,n;return e=new Y({props:{slot:"input",type:V.checkbox,settingKey:"enable",settingValue:t[0].fonts.graph.enable}}),e.$on("changed",t[16]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&1&&(l.settingValue=s[0].fonts.graph.enable),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Ms(t){let e,n;return e=new Y({props:{slot:"input",block:!0,type:V.textarea,height:t[2],settingKey:"list",settingValue:t[0].fonts.graph.list.join(`
`),placeholder:t[3].settings.fontsSettings.graph.fontsList.placeholder}}),e.$on("changed",t[17]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&4&&(l.height=s[2]),i&1&&(l.settingValue=s[0].fonts.graph.list.join(`
`)),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Ls(t){let e,n;return e=new Y({props:{slot:"input",type:V.checkbox,settingKey:"enable",settingValue:t[0].fonts.math.enable}}),e.$on("changed",t[18]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&1&&(l.settingValue=s[0].fonts.math.enable),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function As(t){let e,n;return e=new Y({props:{slot:"input",block:!0,type:V.textarea,height:t[2],settingKey:"list",settingValue:t[0].fonts.math.list.join(`
`),placeholder:t[3].settings.fontsSettings.math.fontsList.placeholder}}),e.$on("changed",t[19]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&4&&(l.height=s[2]),i&1&&(l.settingValue=s[0].fonts.math.list.join(`
`)),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Os(t){let e,n;return e=new Y({props:{slot:"input",type:V.checkbox,settingKey:"enable",settingValue:t[0].fonts.emoji.enable}}),e.$on("changed",t[20]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&1&&(l.settingValue=s[0].fonts.emoji.enable),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Ts(t){let e,n;return e=new Y({props:{slot:"input",block:!0,type:V.textarea,height:t[2],settingKey:"list",settingValue:t[0].fonts.emoji.list.join(`
`),placeholder:t[3].settings.fontsSettings.emoji.fontsList.placeholder}}),e.$on("changed",t[21]),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&4&&(l.height=s[2]),i&1&&(l.settingValue=s[0].fonts.emoji.list.join(`
`)),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Is(t){let e,n,s,i,l,f,o,a,r,h,_,w,g,u,c,$,v,F,j,C,B,T,D,G,z;return n=new P({props:{title:t[3].settings.fontsSettings.base.enable.title,text:t[3].settings.fontsSettings.base.enable.description,$$slots:{input:[ys]},$$scope:{ctx:t}}}),i=new P({props:{block:!0,title:t[3].settings.fontsSettings.base.fontsList.title,text:t[3].settings.fontsSettings.base.fontsList.description,$$slots:{input:[Es]},$$scope:{ctx:t}}}),o=new P({props:{title:t[3].settings.fontsSettings.code.enable.title,text:t[3].settings.fontsSettings.code.enable.description,$$slots:{input:[vs]},$$scope:{ctx:t}}}),r=new P({props:{block:!0,title:t[3].settings.fontsSettings.code.fontsList.title,text:t[3].settings.fontsSettings.code.fontsList.description,$$slots:{input:[js]},$$scope:{ctx:t}}}),w=new P({props:{title:t[3].settings.fontsSettings.graph.enable.title,text:t[3].settings.fontsSettings.graph.enable.description,$$slots:{input:[Ns]},$$scope:{ctx:t}}}),u=new P({props:{block:!0,title:t[3].settings.fontsSettings.graph.fontsList.title,text:t[3].settings.fontsSettings.graph.fontsList.description,$$slots:{input:[Ms]},$$scope:{ctx:t}}}),v=new P({props:{title:t[3].settings.fontsSettings.math.enable.title,text:t[3].settings.fontsSettings.math.enable.description,$$slots:{input:[Ls]},$$scope:{ctx:t}}}),j=new P({props:{block:!0,title:t[3].settings.fontsSettings.math.fontsList.title,text:t[3].settings.fontsSettings.math.fontsList.description,$$slots:{input:[As]},$$scope:{ctx:t}}}),T=new P({props:{title:t[3].settings.fontsSettings.emoji.enable.title,text:t[3].settings.fontsSettings.emoji.enable.description,$$slots:{input:[Os]},$$scope:{ctx:t}}}),G=new P({props:{block:!0,title:t[3].settings.fontsSettings.emoji.fontsList.title,text:t[3].settings.fontsSettings.emoji.fontsList.description,$$slots:{input:[Ts]},$$scope:{ctx:t}}}),{c(){e=A("div"),L(n.$$.fragment),s=I(),L(i.$$.fragment),l=I(),f=A("div"),L(o.$$.fragment),a=I(),L(r.$$.fragment),h=I(),_=A("div"),L(w.$$.fragment),g=I(),L(u.$$.fragment),c=I(),$=A("div"),L(v.$$.fragment),F=I(),L(j.$$.fragment),C=I(),B=A("div"),L(T.$$.fragment),D=I(),L(G.$$.fragment),d(e,"data-type",t[7].fonts[0].name),S(e,"fn__none",t[7].fonts[0].key!==t[25]),d(f,"data-type",t[7].fonts[1].name),S(f,"fn__none",t[7].fonts[1].key!==t[25]),d(_,"data-type",t[7].fonts[2].name),S(_,"fn__none",t[7].fonts[2].key!==t[25]),d($,"data-type",t[7].fonts[3].name),S($,"fn__none",t[7].fonts[3].key!==t[25]),d(B,"data-type",t[7].fonts[4].name),S(B,"fn__none",t[7].fonts[4].key!==t[25])},m(k,m){E(k,e,m),N(n,e,null),O(e,s),N(i,e,null),E(k,l,m),E(k,f,m),N(o,f,null),O(f,a),N(r,f,null),E(k,h,m),E(k,_,m),N(w,_,null),O(_,g),N(u,_,null),E(k,c,m),E(k,$,m),N(v,$,null),O($,F),N(j,$,null),E(k,C,m),E(k,B,m),N(T,B,null),O(B,D),N(G,B,null),z=!0},p(k,m){const Fe={};m&67108865&&(Fe.$$scope={dirty:m,ctx:k}),n.$set(Fe);const Ce={};m&67108869&&(Ce.$$scope={dirty:m,ctx:k}),i.$set(Ce),(!z||m&33554560)&&S(e,"fn__none",k[7].fonts[0].key!==k[25]);const De={};m&67108865&&(De.$$scope={dirty:m,ctx:k}),o.$set(De);const Ve={};m&67108869&&(Ve.$$scope={dirty:m,ctx:k}),r.$set(Ve),(!z||m&33554560)&&S(f,"fn__none",k[7].fonts[1].key!==k[25]);const ze={};m&67108865&&(ze.$$scope={dirty:m,ctx:k}),w.$set(ze);const Be={};m&67108869&&(Be.$$scope={dirty:m,ctx:k}),u.$set(Be),(!z||m&33554560)&&S(_,"fn__none",k[7].fonts[2].key!==k[25]);const Ge={};m&67108865&&(Ge.$$scope={dirty:m,ctx:k}),v.$set(Ge);const Ue={};m&67108869&&(Ue.$$scope={dirty:m,ctx:k}),j.$set(Ue),(!z||m&33554560)&&S($,"fn__none",k[7].fonts[3].key!==k[25]);const He={};m&67108865&&(He.$$scope={dirty:m,ctx:k}),T.$set(He);const Pe={};m&67108869&&(Pe.$$scope={dirty:m,ctx:k}),G.$set(Pe),(!z||m&33554560)&&S(B,"fn__none",k[7].fonts[4].key!==k[25])},i(k){z||(p(n.$$.fragment,k),p(i.$$.fragment,k),p(o.$$.fragment,k),p(r.$$.fragment,k),p(w.$$.fragment,k),p(u.$$.fragment,k),p(v.$$.fragment,k),p(j.$$.fragment,k),p(T.$$.fragment,k),p(G.$$.fragment,k),z=!0)},o(k){b(n.$$.fragment,k),b(i.$$.fragment,k),b(o.$$.fragment,k),b(r.$$.fragment,k),b(w.$$.fragment,k),b(u.$$.fragment,k),b(v.$$.fragment,k),b(j.$$.fragment,k),b(T.$$.fragment,k),b(G.$$.fragment,k),z=!1},d(k){k&&y(e),M(n),M(i),k&&y(l),k&&y(f),M(o),M(r),k&&y(h),k&&y(_),M(w),M(u),k&&y(c),k&&y($),M(v),M(j),k&&y(C),k&&y(B),M(T),M(G)}}}function Fs(t){let e,n;return e=new Qn({props:{focus:zs,tabs:t[7].fonts,$$slots:{default:[Is,({focus:s})=>({25:s}),({focus:s})=>s?33554432:0]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,i){const l={};i&100663301&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}function Cs(t){let e,n,s,i,l,f;return e=new Me({props:{display:t[6][0].key===t[24],$$slots:{default:[ks]},$$scope:{ctx:t}}}),s=new Me({props:{display:t[6][1].key===t[24],$$slots:{default:[Ss]},$$scope:{ctx:t}}}),l=new Me({props:{display:t[6][2].key===t[24],$$slots:{default:[Fs]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment),n=I(),L(s.$$.fragment),i=I(),L(l.$$.fragment)},m(o,a){N(e,o,a),E(o,n,a),N(s,o,a),E(o,i,a),N(l,o,a),f=!0},p(o,a){const r={};a&16777216&&(r.display=o[6][0].key===o[24]),a&67108866&&(r.$$scope={dirty:a,ctx:o}),e.$set(r);const h={};a&16777216&&(h.display=o[6][1].key===o[24]),a&67108869&&(h.$$scope={dirty:a,ctx:o}),s.$set(h);const _={};a&16777216&&(_.display=o[6][2].key===o[24]),a&67108869&&(_.$$scope={dirty:a,ctx:o}),l.$set(_)},i(o){f||(p(e.$$.fragment,o),p(s.$$.fragment,o),p(l.$$.fragment,o),f=!0)},o(o){b(e.$$.fragment,o),b(s.$$.fragment,o),b(l.$$.fragment,o),f=!1},d(o){M(e,o),o&&y(n),M(s,o),o&&y(i),M(l,o)}}}function Ds(t){let e,n;return e=new Cn({props:{panels:t[6],focus:Vs,$$slots:{default:[Cs,({focus:s})=>({24:s}),({focus:s})=>s?16777216:0]},$$scope:{ctx:t}}}),{c(){L(e.$$.fragment)},m(s,i){N(e,s,i),n=!0},p(s,[i]){const l={};i&83886087&&(l.$$scope={dirty:i,ctx:s}),e.$set(l)},i(s){n||(p(e.$$.fragment,s),n=!0)},o(s){b(e.$$.fragment,s),n=!1},d(s){M(e,s)}}}let Vs=0,zs=0;function Bs(t,e,n){let{config:s}=e,{plugin:i}=e,{textareaHeight:l=0}=e;const f=i.i18n;function o(){i.updateConfig(s)}function a(){i.siyuan.confirm(f.settings.generalSettings.reset.title,f.settings.generalSettings.reset.description,async()=>{await i.resetConfig(),globalThis.location.reload()})}var r=(m=>(m[m.general=0]="general",m[m.snippet=1]="snippet",m[m.fonts=2]="fonts",m))(r||{}),h=(m=>(m[m.base=0]="base",m[m.code=1]="code",m[m.graph=2]="graph",m[m.math=3]="math",m[m.emoji=4]="emoji",m))(h||{});const _=[{key:0,text:f.settings.generalSettings.title,name:f.settings.generalSettings.title,icon:"#iconSettings"},{key:1,text:f.settings.cssSettings.title,name:f.settings.cssSettings.title,icon:"#iconCode"},{key:2,text:f.settings.fontsSettings.title,name:f.settings.fontsSettings.title,icon:"#iconFont"}],w={fonts:[{key:0,text:f.settings.fontsSettings.base.title,name:f.settings.fontsSettings.base.title,icon:"🗛"},{key:1,text:f.settings.fontsSettings.code.title,name:f.settings.fontsSettings.code.title,icon:"💻"},{key:2,text:f.settings.fontsSettings.graph.title,name:f.settings.fontsSettings.graph.title,icon:"📊"},{key:3,text:f.settings.fontsSettings.math.title,name:f.settings.fontsSettings.math.title,icon:"🔢"},{key:4,text:f.settings.fontsSettings.emoji.title,name:f.settings.fontsSettings.emoji.title,icon:"🙂"}]},g=()=>i.showSystemFonts(),u=()=>i.showUsableFonts(),c=m=>{n(0,s.css.enable=m.detail.value,s),o()},$=m=>{n(0,s.css.code=m.detail.value,s),o()},v=m=>{n(0,s.fonts.base.enable=m.detail.value,s),o()},F=m=>{m.detail.value===""?n(0,s.fonts.base.list=[],s):n(0,s.fonts.base.list=m.detail.value.split(`
`),s),o()},j=m=>{n(0,s.fonts.code.enable=m.detail.value,s),o()},C=m=>{m.detail.value===""?n(0,s.fonts.code.list=[],s):n(0,s.fonts.code.list=m.detail.value.split(`
`),s),o()},B=m=>{n(0,s.fonts.graph.enable=m.detail.value,s),o()},T=m=>{m.detail.value===""?n(0,s.fonts.graph.list=[],s):n(0,s.fonts.graph.list=m.detail.value.split(`
`),s),o()},D=m=>{n(0,s.fonts.math.enable=m.detail.value,s),o()},G=m=>{m.detail.value===""?n(0,s.fonts.math.list=[],s):n(0,s.fonts.math.list=m.detail.value.split(`
`),s),o()},z=m=>{n(0,s.fonts.emoji.enable=m.detail.value,s),o()},k=m=>{m.detail.value===""?n(0,s.fonts.emoji.list=[],s):n(0,s.fonts.emoji.list=m.detail.value.split(`
`),s),o()};return t.$$set=m=>{"config"in m&&n(0,s=m.config),"plugin"in m&&n(1,i=m.plugin),"textareaHeight"in m&&n(2,l=m.textareaHeight)},[s,i,l,f,o,a,_,w,g,u,c,$,v,F,j,C,B,T,D,G,z,k]}class Gs extends Z{constructor(e){super(),X(this,e,Bs,Ds,W,{config:0,plugin:1,textareaHeight:2})}}function Us(t){switch(t=t.trim(),!0){case(t.startsWith('"')&&t.endsWith('"')):case(t.startsWith("'")&&t.endsWith("'")):return t;default:return`"${t}"`}}function ce(t){return t.filter(e=>!/^\s*$/.test(e)).map(Us)}function Hs(t){var n,s,i,l,f;const e=[];if(e.push(":root {"),((n=t.base)==null?void 0:n.length)>0){const o=ce(t.base);e.push(`    --b3-font-family: ${o.join(", ")};`)}if(((s=t.code)==null?void 0:s.length)>0){const o=ce(t.code);e.push(`    --b3-font-family-code: ${o.join(", ")};`)}if(((i=t.graph)==null?void 0:i.length)>0){const o=ce(t.graph);e.push(`    --b3-font-family-graph: ${o.join(", ")};`)}if(((l=t.math)==null?void 0:l.length)>0){const o=ce(t.math);e.push(`    --b3-font-family-math: ${o.join(", ")};`)}if(((f=t.emoji)==null?void 0:f.length)>0){const o=ce(t.emoji);e.push(`    --b3-font-family-emoji: ${o.join(", ")};`)}return e.push("}"),e.join(`
`)}const Ps="custom-fonts",Ys="Zuoqiu Yingyi",qs="https://github.com/Zuoqiu-Yingyi/siyuan-plugin-custom-fonts",Rs="1.0.0",Ks="2.9.0",Ws=["all"],Xs=["all"],Zs={default:"Custom Fonts",zh_CN:"自定义字体",zh_CHT:"自定義字型"},Js={default:"Customize the fonts of various elements in the SiYuan interface.",zh_CN:"自定义思源界面中各种元素的字体。",zh_CHT:"自定義思源介面中各種元素的字型。"},Qs={default:"README.md",zh_CN:"README_zh_CN.md",zh_CHT:"README_zh_CN.md"},xs={openCollective:"",patreon:"",github:"",custom:["https://afdian.net/a/zuoqiu","https://ko-fi.com/zuoqiu"]},ei={name:Ps,author:Ys,url:qs,version:Rs,minAppVersion:Ks,backends:Ws,frontends:Xs,displayName:Zs,description:Js,readme:Qs,funding:xs},wt={css:{enable:!0,code:`/* Twemoji Mozilla: https://github.com/mozilla/twemoji-colr */
@font-face {
    font-family: "Twemoji Mozilla";
    font-style: normal;
    src: url("plugins/${ei.name}/static/fonts/Twemoji.Mozilla/Twemoji.Mozilla-0.7.0.ttf");
}
`},fonts:{base:{enable:!1,list:["Helvetica Neue","Luxi Sans","DejaVu Sans","Hiragino Sans GB","Microsoft Yahei","sans-serif","Apple Color Emoji","Segoe UI Emoji","Noto Color Emoji","Segoe UI Symbol","Android Emoji","EmojiSymbols"]},code:{enable:!1,list:["JetBrainsMono-Regular","mononoki","Consolas","Liberation Mono","Menlo","Courier","monospace","Apple Color Emoji","Segoe UI Emoji","Noto Color Emoji","Segoe UI Symbol","Android Emoji","EmojiSymbols"]},graph:{enable:!1,list:["mononoki"]},math:{enable:!1,list:["KaTeX_Math","KaTeX_Main"]},emoji:{enable:!0,list:["Twemoji Mozilla","Segoe UI Emoji","Segoe UI Symbol","Segoe UI","Apple Color Emoji","Noto Color Emoji","Android Emoji"]}}},ye=class extends J.Plugin{constructor(n){super(n);ee(this,"siyuan",J);ee(this,"logger");ee(this,"STYLE_ELEMENT_ID");ee(this,"SETTINGS_DIALOG_ID");ee(this,"SYSTEM_FONTS_DIALOG_ID");ee(this,"USABLE_FONTS_DIALOG_ID");ee(this,"config");this.logger=new Ft(this.name),this.STYLE_ELEMENT_ID=`plugin-${this.name}-style`,this.SETTINGS_DIALOG_ID=`plugin-${this.name}-settings-dialog`,this.SYSTEM_FONTS_DIALOG_ID=`plugin-${this.name}-system-fonts-dialog`,this.USABLE_FONTS_DIALOG_ID=`plugin-${this.name}-usable-fonts-dialog`}onload(){this.loadData(ye.GLOBAL_CONFIG_NAME).then(n=>{this.config=Re(wt,n||{})}).catch(n=>this.logger.error(n)).finally(()=>{this.updateStyle()})}onLayoutReady(){Vt(this.STYLE_ELEMENT_ID)}onunload(){Dt(this.STYLE_ELEMENT_ID)}openSetting(){const n=this,s=new J.Dialog({title:`${this.i18n.displayName} <code class="fn__code">${this.name}</code>`,content:`<div id="${n.SETTINGS_DIALOG_ID}" class="fn__flex-column" />`,width:Ye?"92vw":"768px",height:Ye?void 0:"640px"});new Gs({target:s.element.querySelector(`#${n.SETTINGS_DIALOG_ID}`),props:{config:this.config,plugin:this,textareaHeight:320}})}updateStyle(){Bt(this.STYLE_ELEMENT_ID,[this.config.css.enable?this.config.css.code:void 0,Hs({base:this.config.fonts.base.enable?this.config.fonts.base.list:void 0,code:this.config.fonts.code.enable?this.config.fonts.code.list:void 0,graph:this.config.fonts.graph.enable?this.config.fonts.graph.list:void 0,math:this.config.fonts.math.enable?this.config.fonts.math.list:void 0,emoji:this.config.fonts.emoji.enable?this.config.fonts.emoji.list:void 0})].join(`

`))}async resetConfig(){return this.updateConfig(Re(wt))}async updateConfig(n){return n&&n!==this.config&&(this.config=n),this.updateStyle(),this.saveData(ye.GLOBAL_CONFIG_NAME,this.config)}async showSystemFonts(){const n=new J.Dialog({title:this.i18n.settings.generalSettings.showSystemFonts.title,content:`<div id="${this.SYSTEM_FONTS_DIALOG_ID}" class="fn__flex-column">${this.i18n.message.loading}</div>`,height:"92vh"});J.fetchPost("/api/system/getSysFonts",void 0,s=>{const i=n.element.querySelector(`#${this.SYSTEM_FONTS_DIALOG_ID}`);if(s.code===0){const l=s.data.map(f=>({icon:"#iconFont",text:f,meta:f,style:`font-family: "${f}"`}));i.innerHTML="",new Oe({target:i,props:{items:l}})}else i.textContent=s.msg})}async showUsableFonts(){if(globalThis.queryLocalFonts){const n=await globalThis.queryLocalFonts(),s=[],i=nn(n);i.families.forEach(f=>{const o=i.map.get(f),a=o.find(r=>r.style==="Regular")??o[0];s.push({icon:"#iconFont",text:a.fullName,meta:a.family,style:`font-family: "${a.family}"`,fold:!0,children:o.map(r=>({icon:"#iconFont",text:r.fullName,meta:r.style,style:`font-family: "${r.family}"`}))})});const l=new J.Dialog({title:this.i18n.settings.generalSettings.showUsableFonts.title,content:`<div id="${this.USABLE_FONTS_DIALOG_ID}" class="fn__flex-column" />`,height:"92vh"});new Oe({target:l.element.querySelector(`#${this.USABLE_FONTS_DIALOG_ID}`),props:{items:s}})}else J.showMessage(`${this.i18n.message.notSupportQueryLocalFonts}<br />[${this.i18n.displayName} <code class="fn__code">${this.name}</code>]`,void 0,"error")}};let $e=ye;ee($e,"GLOBAL_CONFIG_NAME","global-config");module.exports=$e;
